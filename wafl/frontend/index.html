<!DOCTYPE html>
<html lang="">
<head>
    <title> WAFL frontend </title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://unpkg.com/htmx.org@1.9.5"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" src="/wafl.js"></script>
    <link rel="stylesheet" href="/wafl.css">
</head>
<body>
<div id="default-sidebar"
     class="shadow-lg fixed top-0 left-0 z-40 w-15 h-screen transition-transform -translate-x-full sm:translate-x-0"
     aria-label="Sidebar"
>
    <div id="ticker"
         hx-post="/{{conversation_id}}/check_new_messages"
         hx-swap="outerHTML"
         hx-target="#load_conversation"
         hx-trigger="every 1s"
    ></div>
    <div id="load_conversation"
         hx-post="/{{conversation_id}}/load_messages"
         hx-swap="gm"
         hx-target="#messages"
         hx-trigger="load"></div>
    <div class="h-full px-3 py-4 overflow-y-auto bg-gray-800">
        <ul class="space-y-2 font-medium">
            <li>
                <a title="Reset conversation"
                   hx-post="/{{conversation_id}}/reset_conversation"
                   hx-swap="innerHTML scroll:bottom"
                   hx-target="#messages"
                   class="flex items-center p-2 rounded-lg text-white hover:bg-gray-700 group">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
                         stroke-width="1.5" stroke="currentColor" data-slot="icon" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round"
                              d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"/>
                    </svg>
                </a>
            </li>
            <li>
                <a title="Toggle logs"
                   hx-post="/{{conversation_id}}/toggle_logs"
                   hx-swap="none"
                   class="flex items-center p-2 rounded-lg text-white hover:bg-gray-700 group">

                    <svg fill="#FFFFFF" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                         xmlns:xlink="http://www.w3.org/1999/xlink"
                         class="w-6 h-6" viewBox="0 0 548.291 548.291"
                         xml:space="preserve">
                        <g>
                            <path d="M486.201,196.124h-13.166V132.59c0-0.396-0.062-0.795-0.115-1.196c-0.021-2.523-0.825-5-2.552-6.963L364.657,3.677
		c-0.033-0.031-0.064-0.042-0.085-0.073c-0.63-0.707-1.364-1.292-2.143-1.795c-0.229-0.157-0.461-0.286-0.702-0.421
		c-0.672-0.366-1.387-0.671-2.121-0.892c-0.2-0.055-0.379-0.136-0.577-0.188C358.23,0.118,357.401,0,356.562,0H96.757
		C84.894,0,75.256,9.651,75.256,21.502v174.613H62.092c-16.971,0-30.732,13.756-30.732,30.733v159.812
		c0,16.968,13.761,30.731,30.732,30.731h13.164V526.79c0,11.854,9.638,21.501,21.501,21.501h354.776
		c11.853,0,21.501-9.647,21.501-21.501V417.392h13.166c16.966,0,30.729-13.764,30.729-30.731V226.854
		C516.93,209.872,503.167,196.124,486.201,196.124z M96.757,21.502h249.054v110.009c0,5.939,4.817,10.75,10.751,10.75h94.972v53.861
		H96.757V21.502z M317.816,303.427c0,47.77-28.973,76.746-71.558,76.746c-43.234,0-68.531-32.641-68.531-74.152
		c0-43.679,27.887-76.319,70.906-76.319C293.389,229.702,317.816,263.213,317.816,303.427z M82.153,377.79V232.085h33.073v118.039
		h57.944v27.66H82.153V377.79z M451.534,520.962H96.757v-103.57h354.776V520.962z M461.176,371.092
		c-10.162,3.454-29.402,8.209-48.641,8.209c-26.589,0-45.833-6.698-59.24-19.664c-13.396-12.535-20.75-31.568-20.529-52.967
		c0.214-48.436,35.448-76.108,83.229-76.108c18.814,0,33.292,3.688,40.431,7.139l-6.92,26.37
		c-7.999-3.457-17.942-6.268-33.942-6.268c-27.449,0-48.209,15.567-48.209,47.134c0,30.049,18.807,47.771,45.831,47.771
		c7.564,0,13.623-0.852,16.21-2.152v-30.488h-22.478v-25.723h54.258V371.092L461.176,371.092z"/>
                            <path d="M212.533,305.37c0,28.535,13.407,48.64,35.452,48.64c22.268,0,35.021-21.186,35.021-49.5
		c0-26.153-12.539-48.655-35.237-48.655C225.504,255.854,212.533,277.047,212.533,305.37z"/>
                        </g>
                    </svg>
                </a>
            </li>
        </ul>
    </div>
</div>
<div id="screen" class="fixed top-0 left-20 margin-left-20">
    <div id="banner">
    </div>
    <pre id="messages" class="grid grid-flow-col">
    </pre>
    <input id="query" type="text"
           class='shadow-lg'
           name="query"
           placeholder="Type your query here"
           hx-post="/{{conversation_id}}/input"
           hx-swap="outerHTML"
           hx-target="#query"
           hx-trigger="keydown[!shiftKey&&keyCode==13]"
    >
</div>
</body>
</html>
